<!-- extend base layout -->
{% extends "base.html" %}
{% block content %}

<div class="spacer"></div>

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#myprofile" aria-controls="myprofile" role="tab" data-toggle="tab">My Profile</a></li>
    <li role="presentation"><a href="#starred" aria-controls="starred" role="tab" data-toggle="tab">Starred Posts</a></li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="myprofile">

    <form method="POST">    
        <div class="profile">
            <div class="header card">
                <div class="name">{{profile.name}}</div>
                <br>
                <div class="text-center">
                <input id="save-profile-updates" type="submit" value="Save Updates" class="btn btn-primary invisible">                    
                </div>

                <div class="title">General Information</div>

                <div class="form-group">
                    <label>Major</label>
                    <p>{{profile.major}}</p>
                    <p>aa: {{starred}}</p>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input class="form-control" type="text" name="user_email" value="{{profile.email}}">
                </div>

                <div class="form-group">
                    <label>Year</label><br>
                    <select id="user_year_select" name="user_year" class="form-control">
                      <option value="Freshman">Freshman</option>
                      <option value="Sophomore">Sophomore</option>
                      <option value="Junior">Junior</option>
                      <option value="Senior">Senior</option>
                      <option value="Graduate">Graduate</option>
                      <option value="Post-graduate">Post-graduate</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Bio</label><br>
                    <textarea name="user_description" rows="5" class="form-control">{{profile.description}}</textarea>
                </div>

                <div class="item">Availability: 
                {% for day in profile.availability %}
                    <div class="listed">{{day}}</div>
                {% endfor %}
                </div>
            </div>

            <div class="card experience">
                <div class="title">Experience, Skills, Interests</div>
                <div class="item">Skills:
                {% for skill in profile.skills %}
                    <div class="listed">{{skill}}</div>
                {% endfor %}
                </div>
                <div class="item">Interests:
                {% for interest in profile.interests %}
                    <div class="listed">{{interest}}</div>
                {% endfor %}
                </div>
                <div class="item">Favorite Projects:
                {% for project in profile.favorited_projects %}
                    <div class="listed">{{project}}</div>
                {% endfor %}
                </div>
            </div>
                <button class="resume">Resume</button>

        </div>


        </form>

    </div>
    <div role="tabpanel" class="tab-pane" id="profile">
            <div class="card">
                <div class="name">{{profile.name}}</div>
                <div class="description">{{profile.description}}</div>
                <button class="resume">Resume</button>
            </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="starred">
            <div class="card">
                <h2>You have no starred posts</h2>
            </div>
    </div>
  </div>


    <script type="text/javascript">
        $('#user_year_select option').each(function() {
          if ($(this).val() == "{{ profile.year }}") {
            $(this).prop('selected','selected');
          }
        });
        $(document).on("change keyup", "input, select, textarea", function () {
            $('#save-profile-updates').removeClass("invisible");
        });
    </script>

{% endblock %}